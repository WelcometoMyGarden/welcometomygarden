<script>
  import smoothscroll from 'smoothscroll-polyfill';
  import Collapsible from '../components/Collapsible.svelte';
  import { Button } from '../components/UI';

  import Logo from '../images/logo.svg';
  import welcomeMap from '../images/welcome-map.svg';
  import ArrowDown from '../images/arrow-down.svg';
  import Step1 from '../images/step-1.svg';
  import Step2 from '../images/step-2.svg';
  import Step3 from '../images/step-3.svg';

  smoothscroll.polyfill();

  function handleLearnMoreClick() {
    const stepsSection = document.getElementById('steps-section');
    stepsSection.scrollIntoView({ behavior: 'smooth' });
  }

  let currentCollapsible = null;
  const setCurrentCollapsible = e => {
    Number(e.target.id) === currentCollapsible
      ? (currentCollapsible = null)
      : (currentCollapsible = Number(e.target.id));
  };
</script>

<section class="landing">
  <div class="welcome">
    <div class="welcome-logo">
      {@html Logo}
    </div>
    <h1 class="heading-underline-center">Welcome to My Garden</h1>
    <p class="welcome-text">
      We are a network of citizens offering free camping spots in their gardens for slow travelers
    </p>
    <div class="welcome-buttons">
      <Button uppercase inverse>Add your garden</Button>
      <Button uppercase>Explore map</Button>
    </div>
    <div class="welcome-map">
      {@html welcomeMap}
    </div>
  </div>
</section>

<div class="learn-more">
  <span class="learn-more-text" aria-hidden>Learn more</span>
  <button class="learn-more-button" on:click={handleLearnMoreClick}>
    <span class="screen-reader-only">Learn more</span>
    <div>
      {@html ArrowDown}
    </div>
  </button>
</div>

<section id="steps-section" class="steps">
  <div class="step">
    <div class="step-logo">
      {@html Step1}
    </div>
    <h2 class="step-header">Step 1: Sign up to become or find a host</h2>
    <p class="step-text">
      Do you want to open up your garden? Please click the Add your garden button. Are you looking
      for a camping spot? Pick your favourite garden and contact your host! Arrange a date and time
      for your stay and off you go!
    </p>
  </div>
  <div class="step">
    <div class="step-logo">
      {@html Step2}
    </div>
    <h2 class="step-header">Step 2: Plan your journey</h2>
    <p class="step-text">
      After you’ve made arrangements with your hosts, walk or bike to your camping spot. Introduce
      yourself, pitch your tent for the night, and continue on your hiking or biking trail the next
      day. And have a great time, of course!
    </p>
  </div>
  <div class="step">
    <div class="step-logo">
      {@html Step3}
    </div>
    <h2 class="step-header">Step 3: Pitch your tent and have fun!</h2>
    <p class="step-text">
      Have a quiet night all by yourself, have fun with your friends or family or hang out with your
      host - whatever both parties prefer. Say fond farewells and continue on your hike or ride the
      next day!
    </p>
  </div>
</section>

<section class="faq">
  <div class="card faq-intro">
    <h1 class="heading-underline-center">All you need to know</h1>
    <p>
      Here are the most important things you need to know about your next adventure. Please read
      this FAQ section thoroughly so that you know what you’re getting&nbsp;yourself&nbsp;into.
    </p>
  </div>
  <div class="faq-questions">
    <Collapsible id="0" onClick={setCurrentCollapsible} open={currentCollapsible === 0}>
      <h3 slot="title">Who is Welcome To My Garden for?</h3>
      <p slot="content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique eaque obcaecati laborum
        rerum beatae culpa itaque voluptate corrupti repudiandae ea esse quas harum nam, sunt non
        iure minima modi blanditiis?
      </p>
    </Collapsible>
    <Collapsible id="1" onClick={setCurrentCollapsible} open={currentCollapsible === 1}>
      <h3 slot="title">How do I get to my camping spot?</h3>
      <p slot="content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique eaque obcaecati laborum
        rerum beatae culpa itaque voluptate corrupti repudiandae ea esse quas harum nam, sunt non
        iure minima modi blanditiis?
      </p>
    </Collapsible>
    <Collapsible id="2" onClick={setCurrentCollapsible} open={currentCollapsible === 2}>
      <h3 slot="title">How do I request a stay?</h3>
      <p slot="content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique eaque obcaecati laborum
        rerum beatae culpa itaque voluptate corrupti repudiandae ea esse quas harum nam, sunt non
        iure minima modi blanditiis?
      </p>
    </Collapsible>
    <Collapsible id="3" onClick={setCurrentCollapsible} open={currentCollapsible === 3}>
      <h3 slot="title">What about facilities?</h3>
      <p slot="content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique eaque obcaecati laborum
        rerum beatae culpa itaque voluptate corrupti repudiandae ea esse quas harum nam, sunt non
        iure minima modi blanditiis?
      </p>
    </Collapsible>
    <Collapsible id="4" onClick={setCurrentCollapsible} open={currentCollapsible === 4}>
      <h3 slot="title">Does Welcome To My Garden cost anything?</h3>
      <p slot="content">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique eaque obcaecati laborum
        rerum beatae culpa itaque voluptate corrupti repudiandae ea esse quas harum nam, sunt non
        iure minima modi blanditiis?
      </p>
    </Collapsible>
  </div>
</section>

<section class="cooperation">
  <div class="card cooperation-card partners">
    <h1 class="heading-underline-center">Our partners</h1>
    <div>Logos</div>
  </div>

  <div class="card cooperation-card support">
    <h1 class="heading-underline-center">Support us</h1>
    <p>
      Welcome to My Garden is free to use but we have to pay a couple of bills.
      <a href="#">Make a donation</a>
      to keep us going!
    </p>
  </div>
</section>

<style>
  h1 {
    font-size: 3.6rem;
    line-height: 9rem;
    font-family: var(--fonts-titles);
    margin-bottom: 3rem;
    color: var(--color-green);
  }

  h2 {
    font-size: 1.8rem;
    line-height: 2.8rem;
    font-family: var(--fonts-copy);
    color: var(--color-green);
    text-transform: uppercase;
  }

  section {
    margin-bottom: 9rem;
  }

  p {
    font-size: 1.6rem;
    line-height: 2.6rem;
    color: var(--color-green);
    text-align: justify;
  }

  a {
    font-weight: bold;
    text-decoration: underline;
  }

  .screen-reader-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap; /* added line */
    border: 0;
  }

  .heading-underline-center {
    position: relative;
  }

  .heading-underline-center::after {
    position: absolute;
    bottom: -4px;
    left: 50%;
    content: '';
    height: 3px;
    background: var(--color-orange);
    width: 12rem;
    margin-left: -6rem;
  }

  .landing {
    display: flex;
    padding-top: 14rem;
    padding-left: 17rem;
  }

  .welcome-map {
    position: absolute;
    right: 0;
    top: 0;
    width: 35vw;
    max-width: 54rem;
  }

  .welcome-map > :global(svg) {
    max-width: 100%;
  }

  .welcome {
    max-width: 55rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .welcome-logo {
    width: 20vw;
    max-width: 23.3rem;
    min-width: 16rem;
  }

  .welcome-logo > :global(svg) {
    max-width: 100%;
  }

  .welcome-text {
    margin-bottom: 3.7rem;
    text-align: center;
  }

  .welcome-buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0 auto;
  }

  .welcome-buttons :global(button:first-of-type) {
    margin-bottom: 1.6rem;
  }

  .learn-more {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 2rem 0 7rem 0;
  }

  .learn-more-text {
    font-weight: bold;
    margin-bottom: 2rem;
  }

  .learn-more-button {
    border: none;
    cursor: pointer;
    background: none;
  }

  .steps {
    display: flex;
    padding: 0 10rem;
  }

  .step {
    margin-right: 7rem;
    display: grid;
    grid-template-rows: 17rem 0.8fr 2fr;
  }

  .step-header {
    font-family: var(--font-copy);
    font-weight: bold;
  }

  .step:last-of-type {
    margin-right: 0;
  }

  .step-logo {
    display: flex;
    justify-content: center;
  }

  .card p {
    line-height: 3.2rem;
    text-align: center;
  }

  .faq {
    display: flex;
  }

  .faq-intro {
    background-color: var(--color-green);
    width: 50%;
    align-self: flex-start;
  }

  .faq-intro h1 {
    color: var(--color-white);
    text-align: center;
  }

  .faq-intro p {
    color: var(--color-white);
    line-height: 3.2rem;
  }

  .faq-questions {
    display: flex;
    flex-direction: column;
    width: 50%;
  }

  .cooperation {
    display: flex;
  }

  .cooperation h1 {
    margin-bottom: 4.6rem;
  }

  .cooperation-card {
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    width: 50%;
    padding: 12rem 10rem;
  }

  .support {
    background-color: var(--color-beige-light);
  }

  @media only screen and (max-width: 1500px) {
    .faq-intro {
      padding: 6rem 12rem;
    }
  }

  @media only screen and (max-width: 1300px) {
    h1 {
      font-size: 2.8rem;
      margin-bottom: 2.3rem;
      line-height: 7.5rem;
    }

    .faq-intro {
      padding: 6rem 10rem;
    }

    .landing {
      justify-content: center;
      padding-left: 0;
    }

    .welcome {
      padding-left: 0;
    }

    .welcome-logo {
      width: 25vw;
    }
  }

  @media only screen and (max-width: 1150px) {
    .steps {
      flex-direction: column;
      padding: 0 12rem;
    }

    .step {
      margin-right: 0;
    }

    .step-header {
      text-align: center;
      margin-bottom: 1rem;
    }

    .faq {
      flex-direction: column;
      margin-bottom: 0;
    }

    .faq > * {
      width: 100%;
    }

    .faq-intro {
      padding: 6rem 12rem 8rem;
    }

    .faq-list {
      padding: 0;
    }

    .cooperation {
      flex-direction: column;
    }

    .cooperation > * {
      width: 100%;
    }

    .cooperation-card {
      padding-top: 10rem;
    }

    .partners {
      order: 2;
    }

    .support {
      order: 1;
    }
  }

  @media only screen and (max-width: 1000px) {
    .landing {
      padding: 14rem 10rem 0;
    }

    .welcome-logo {
      width: 30vw;
    }

    .steps {
      padding: 0 10rem;
    }

    .faq-intro {
      padding: 6rem 10rem 8rem;
    }
  }

  @media only screen and (max-width: 700px) {
    .learn-more {
      display: none;
    }

    .landing {
      padding: 10rem 8rem 2rem;
    }

    .welcome-logo {
      width: 40vw;
    }

    .welcome-map {
      top: -2rem;
      width: 35vw;
    }
    .steps {
      padding: 0 8rem;
    }

    .faq-intro {
      padding: 4rem 8rem 6rem;
    }

    .cooperation-card {
      padding: 8rem 8rem 10rem;
    }
  }

  @media only screen and (max-width: 600px) {
    h1 {
      font-size: 2.2rem;
      margin-bottom: 2rem;
      line-height: 6.5rem;
    }
  }

  @media only screen and (max-width: 500px) {
    p {
      font-size: 1.4rem;
    }

    .landing {
      padding: 10rem 4rem 2rem;
    }

    .welcome-map {
      width: 40vw;
    }

    .welcome-logo {
      width: 45vw;
    }

    .steps {
      padding: 0 4rem;
    }

    .faq-intro {
      padding: 4rem 4rem 6rem;
    }

    .cooperation-card {
      padding: 8rem 4rem 10rem;
    }
  }

  @media only screen and (max-width: 400px) {
    h1 {
      font-size: 1.8rem;
      line-height: 5.5rem;
      margin-bottom: 1.5rem;
    }

    h2 {
      font-size: 1.4rem;
    }

    .landing {
      padding: 6rem 3rem;
    }

    .welcome-text {
      margin-bottom: 2rem;
    }

    .welcome-logo {
      width: 50vw;
    }

    .steps {
      padding: 0 3rem;
    }

    .faq-intro {
      padding: 4rem 3rem 6rem;
    }

    .faq-intro p {
      line-height: 2.6rem;
    }

    .card p {
      line-height: 2.6rem;
    }

    .cooperation-card {
      padding: 8rem 3rem 10rem;
    }
  }
</style>
